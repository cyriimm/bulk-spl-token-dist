{"ast":null,"code":"var _jsxFileName = \"/Users/onyejivictor/Documents/code/cope/bulk-spl-token-dist/src/components/MultiTokenSender.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useState, useEffect } from 'react'; //imports\n\nimport { Connection, PublicKey } from '@solana/web3.js';\nimport { ConnectionContext, useConnection } from '../utils/connection';\nimport { parseMintData, parseTokenAccountData } from '../utils/tokens/data';\nimport { TOKEN_PROGRAM_ID } from '../utils/tokens/instructions';\nimport _ from 'lodash';\nimport Queue from '../utils/Queue';\nimport { getTokenInfo, useTokenInfos } from '../utils/tokens/names';\nimport { WalletGiftcard } from 'mdi-material-ui';\nimport { resolve } from 'path';\nimport { findAssociatedTokenAddress, transferTokens } from '../utils/tokens';\nimport { useWallet } from '../utils/wallet';\nimport { useSendTransaction } from '../utils/notifications';\nimport CSVReader from 'react-csv-reader';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction MultiTokenSender() {\n  _s();\n\n  const [sendTransaction, sending] = useSendTransaction();\n  const [data, setData] = useState(null);\n  const [message, setMessage] = useState(null);\n  const [successResult, sets] = useState([]); // const [items, setItems] = useState([\n  //   {\n  //     name: 'usdc',\n  //     toAddress: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n  //     spl_address: 'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v',\n  //     amountToSend: '1',\n  //   },\n  //   {\n  //     name: 'usdt',\n  //     toAddress: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n  //     spl_address: '6AdCQrMEbqoucMeBj64BNE78FmZoocHipJr2eaP8MwWV',\n  //     amountToSend: '1',\n  //   },\n  //   {\n  //     name: 'usdc',\n  //     toAddress: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n  //     spl_address: 'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v',\n  //     amountToSend: '1',\n  //   },\n  //   {\n  //     name: 'usdt',\n  //     toAddress: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n  //     spl_address: '6AdCQrMEbqoucMeBj64BNE78FmZoocHipJr2eaP8MwWV',\n  //     amountToSend: '1',\n  //   },\n  //   {\n  //     name: 'usdc',\n  //     toAddress: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n  //     spl_address: 'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v',\n  //     amountToSend: '1',\n  //   },\n  //   {\n  //     name: 'usdt',\n  //     toAddress: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n  //     spl_address: '6AdCQrMEbqoucMeBj64BNE78FmZoocHipJr2eaP8MwWV',\n  //     amountToSend: '1',\n  //   },\n  //   {\n  //     name: 'usdc',\n  //     toAddress: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n  //     spl_address: 'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v',\n  //     amountToSend: '1',\n  //   },\n  //   {\n  //     name: 'usdc',\n  //     toAddress: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n  //     spl_address: 'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v',\n  //     amountToSend: '1',\n  //   },\n  //   {\n  //     name: 'usdc',\n  //     toAddress: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n  //     spl_address: 'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v',\n  //     amountToSend: '1',\n  //   },\n  //   {\n  //     name: 'usdc',\n  //     toAddress: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n  //     spl_address: 'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v',\n  //     amountToSend: '1',\n  //   },\n  //   // {\n  //   //   name: 'serum',\n  //   //   to: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n  //   //   spl_address: 'SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt',\n  //   //   amountToSend: '40',\n  //   // }\n  // ]);\n\n  const [queue, setQueue] = useState('');\n  let context = useContext(ConnectionContext);\n  const tokenInfos = useTokenInfos();\n  const wallet = useWallet();\n  const {\n    endpoint,\n    setEndpoint,\n    connection\n  } = context;\n  useEffect(() => {\n    if (data) {\n      loadToQueue();\n    }\n\n    return () => {};\n  }, [data]);\n\n  const mapDataToState = data => {\n    const mappedData = data.map(item => ({\n      id: item[0],\n      toAddress: item[1],\n      spl_address: item[2],\n      amountToSend: item[3]\n    }));\n    setData(mappedData);\n  };\n\n  const loadToQueue = () => {\n    const queue = new Queue();\n    data.map(item => {\n      const send = () => {\n        return async () => {\n          try {\n            const mint = new PublicKey(item.spl_address);\n            const sourcePublicKey = await findAssociatedTokenAddress(wallet.publicKey, mint);\n            const accountInfo = await connection.getAccountInfo(sourcePublicKey);\n            const mintInfo = await connection.getAccountInfo(mint); // const infos = getTokenInfo(mint, endpoint, tokenInfos);\n\n            let {\n              decimals\n            } = parseMintData(mintInfo.data);\n            const amountToSend = item.amount = Math.round(parseFloat(item.amountToSend) * 10 ** decimals);\n            let {\n              owner,\n              amount\n            } = (accountInfo === null || accountInfo === void 0 ? void 0 : accountInfo.owner.equals(TOKEN_PROGRAM_ID)) ? parseTokenAccountData(accountInfo.data) : {};\n            const transaction = {\n              wallet,\n              amountToSend,\n              mint,\n              decimals,\n              override: true,\n              destinationPublicKey: new PublicKey(item.toAddress)\n            };\n            const tx = {\n              connection,\n              owner: wallet,\n              sourcePublicKey: sourcePublicKey,\n              destinationPublicKey: transaction.destinationPublicKey,\n              amount: amountToSend,\n              memo: '',\n              mint: mint,\n              decimals: decimals,\n              overrideDestinationCheck: true\n            };\n            const result = await sendTransaction(transferTokens(tx));\n          } catch (error) {\n            console.log(error);\n          }\n        };\n      };\n\n      queue.populateData([send(), item]);\n      console.log(queue);\n    });\n    setQueue(queue); //   });\n  };\n\n  const beginSend = () => {\n    queue.subcribe(setMessage);\n    setInterval(() => {\n      queue.run();\n    }, 3000);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        display: 'flex',\n        padding: '1rem',\n        fontWeight: 'bold'\n      },\n      children: \"Multi Token Sender\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        padding: '1rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(CSVReader, {\n        onFileLoaded: (data, fileInfo) => {\n          console.dir(data);\n          mapDataToState(data);\n        },\n        style: {\n          marginTop: '1.5rem'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        disabled: !data,\n        onClick: beginSend,\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(MultiTokenSender, \"28tmfnPoJeGFBOyifi4dQvCzKE8=\", false, function () {\n  return [useSendTransaction, useTokenInfos, useWallet];\n});\n\n_c = MultiTokenSender;\nexport default MultiTokenSender;\n\nvar _c;\n\n$RefreshReg$(_c, \"MultiTokenSender\");","map":{"version":3,"sources":["/Users/onyejivictor/Documents/code/cope/bulk-spl-token-dist/src/components/MultiTokenSender.jsx"],"names":["React","useContext","useState","useEffect","Connection","PublicKey","ConnectionContext","useConnection","parseMintData","parseTokenAccountData","TOKEN_PROGRAM_ID","_","Queue","getTokenInfo","useTokenInfos","WalletGiftcard","resolve","findAssociatedTokenAddress","transferTokens","useWallet","useSendTransaction","CSVReader","MultiTokenSender","sendTransaction","sending","data","setData","message","setMessage","successResult","sets","queue","setQueue","context","tokenInfos","wallet","endpoint","setEndpoint","connection","loadToQueue","mapDataToState","mappedData","map","item","id","toAddress","spl_address","amountToSend","send","mint","sourcePublicKey","publicKey","accountInfo","getAccountInfo","mintInfo","decimals","amount","Math","round","parseFloat","owner","equals","transaction","override","destinationPublicKey","tx","memo","overrideDestinationCheck","result","error","console","log","populateData","beginSend","subcribe","setInterval","run","display","padding","fontWeight","fileInfo","dir","marginTop"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\n\n//imports\n\nimport { Connection, PublicKey } from '@solana/web3.js';\nimport { ConnectionContext, useConnection } from '../utils/connection';\nimport { parseMintData, parseTokenAccountData } from '../utils/tokens/data';\nimport { TOKEN_PROGRAM_ID } from '../utils/tokens/instructions';\nimport _ from 'lodash';\nimport Queue from '../utils/Queue';\nimport { getTokenInfo, useTokenInfos } from '../utils/tokens/names';\nimport { WalletGiftcard } from 'mdi-material-ui';\nimport { resolve } from 'path';\nimport { findAssociatedTokenAddress, transferTokens } from '../utils/tokens';\nimport { useWallet } from '../utils/wallet';\nimport { useSendTransaction } from '../utils/notifications';\nimport CSVReader from 'react-csv-reader';\n\nfunction MultiTokenSender() {\n  const [sendTransaction, sending] = useSendTransaction();\n  const [data, setData] = useState(null);\n  const [message, setMessage] = useState(null);\n  const [successResult, sets] = useState([]);\n\n  // const [items, setItems] = useState([\n  //   {\n  //     name: 'usdc',\n  //     toAddress: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n  //     spl_address: 'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v',\n  //     amountToSend: '1',\n  //   },\n  //   {\n  //     name: 'usdt',\n\n  //     toAddress: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n  //     spl_address: '6AdCQrMEbqoucMeBj64BNE78FmZoocHipJr2eaP8MwWV',\n  //     amountToSend: '1',\n  //   },\n  //   {\n  //     name: 'usdc',\n  //     toAddress: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n  //     spl_address: 'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v',\n  //     amountToSend: '1',\n  //   },\n  //   {\n  //     name: 'usdt',\n\n  //     toAddress: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n  //     spl_address: '6AdCQrMEbqoucMeBj64BNE78FmZoocHipJr2eaP8MwWV',\n  //     amountToSend: '1',\n  //   },\n  //   {\n  //     name: 'usdc',\n  //     toAddress: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n  //     spl_address: 'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v',\n  //     amountToSend: '1',\n  //   },\n  //   {\n  //     name: 'usdt',\n\n  //     toAddress: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n  //     spl_address: '6AdCQrMEbqoucMeBj64BNE78FmZoocHipJr2eaP8MwWV',\n  //     amountToSend: '1',\n  //   },\n  //   {\n  //     name: 'usdc',\n  //     toAddress: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n  //     spl_address: 'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v',\n  //     amountToSend: '1',\n  //   },\n  //   {\n  //     name: 'usdc',\n  //     toAddress: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n  //     spl_address: 'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v',\n  //     amountToSend: '1',\n  //   },\n  //   {\n  //     name: 'usdc',\n  //     toAddress: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n  //     spl_address: 'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v',\n  //     amountToSend: '1',\n  //   },\n  //   {\n  //     name: 'usdc',\n  //     toAddress: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n  //     spl_address: 'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v',\n  //     amountToSend: '1',\n  //   },\n  //   // {\n  //   //   name: 'serum',\n  //   //   to: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n  //   //   spl_address: 'SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt',\n  //   //   amountToSend: '40',\n  //   // }\n  // ]);\n\n  const [queue, setQueue] = useState('');\n  let context = useContext(ConnectionContext);\n  const tokenInfos = useTokenInfos();\n\n  const wallet = useWallet();\n  const { endpoint, setEndpoint, connection } = context;\n\n  useEffect(() => {\n    if (data) {\n      loadToQueue();\n    }\n    return () => {};\n  }, [data]);\n\n  const mapDataToState = (data) => {\n    const mappedData = data.map((item) => ({\n      id: item[0],\n\n      toAddress: item[1],\n      spl_address: item[2],\n      amountToSend: item[3],\n    }));\n\n    setData(mappedData);\n  };\n\n  const loadToQueue = () => {\n    const queue = new Queue();\n    data.map((item) => {\n      const send = () => {\n        return async () => {\n          try {\n            const mint = new PublicKey(item.spl_address);\n            const sourcePublicKey = await findAssociatedTokenAddress(\n              wallet.publicKey,\n              mint,\n            );\n\n            const accountInfo = await connection.getAccountInfo(\n              sourcePublicKey,\n            );\n            const mintInfo = await connection.getAccountInfo(mint);\n            // const infos = getTokenInfo(mint, endpoint, tokenInfos);\n            let { decimals } = parseMintData(mintInfo.data);\n            const amountToSend = (item.amount = Math.round(\n              parseFloat(item.amountToSend) * 10 ** decimals,\n            ));\n            let { owner, amount } = accountInfo?.owner.equals(TOKEN_PROGRAM_ID)\n              ? parseTokenAccountData(accountInfo.data)\n              : {};\n\n            const transaction = {\n              wallet,\n              amountToSend,\n              mint,\n              decimals,\n              override: true,\n              destinationPublicKey: new PublicKey(item.toAddress),\n            };\n\n            const tx = {\n              connection,\n              owner: wallet,\n              sourcePublicKey: sourcePublicKey,\n              destinationPublicKey: transaction.destinationPublicKey,\n              amount: amountToSend,\n              memo: '',\n              mint: mint,\n              decimals: decimals,\n              overrideDestinationCheck: true,\n            };\n\n            const result = await sendTransaction(transferTokens(tx));\n          } catch (error) {\n            console.log(error);\n          }\n        };\n      };\n\n      queue.populateData([send(), item]);\n      console.log(queue);\n    });\n    setQueue(queue);\n    //   });\n  };\n\n  const beginSend = () => {\n    queue.subcribe(setMessage);\n\n    setInterval(() => {\n      queue.run();\n    }, 3000);\n  };\n\n  return (\n    <>\n      <h3 style={{ display: 'flex', padding: '1rem', fontWeight: 'bold' }}>\n        Multi Token Sender\n      </h3>\n      <div style={{ display: 'flex', padding: '1rem' }}>\n        <CSVReader\n          onFileLoaded={(data, fileInfo) => {\n            console.dir(data);\n            mapDataToState(data);\n          }}\n          style={{ marginTop: '1.5rem' }}\n        ></CSVReader>\n\n        <button disabled={!data} onClick={beginSend}>\n          Send\n        </button>\n      </div>\n    </>\n  );\n}\n\nexport default MultiTokenSender;\n"]},"metadata":{},"sourceType":"module"}