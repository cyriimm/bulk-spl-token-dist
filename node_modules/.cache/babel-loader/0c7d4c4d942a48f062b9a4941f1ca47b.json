{"ast":null,"code":"'use strict';\n\nconst uuid = require('uuid/v4');\n/**\n *  Generates a JSON-RPC 1.0 or 2.0 request\n *  @param {String} method Name of method to call\n *  @param {Array|Object} params Array of parameters passed to the method as specified, or an object of parameter names and corresponding value\n *  @param {String|Number|null} [id] Request ID can be a string, number, null for explicit notification or left out for automatic generation\n *  @param {Object} [options]\n *  @param {Number} [options.version=2] JSON-RPC version to use (1 or 2)\n *  @param {Boolean} [options.notificationIdNull=false] When true, version 2 requests will set id to null instead of omitting it\n *  @param {Function} [options.generator] Passed the request, and the options object and is expected to return a request ID\n *  @throws {TypeError} If any of the parameters are invalid\n *  @return {Object} A JSON-RPC 1.0 or 2.0 request\n *  @memberOf Utils\n */\n\n\nconst generateRequest = function (method, params, id, options) {\n  if (typeof method !== 'string') {\n    throw new TypeError(method + ' must be a string');\n  }\n\n  options = options || {}; // check valid version provided\n\n  const version = typeof options.version === 'number' ? options.version : 2;\n\n  if (version !== 1 && version !== 2) {\n    throw new TypeError(version + ' must be 1 or 2');\n  }\n\n  const request = {\n    method: method\n  };\n\n  if (version === 2) {\n    request.jsonrpc = '2.0';\n  }\n\n  if (params) {\n    // params given, but invalid?\n    if (typeof params !== 'object' && !Array.isArray(params)) {\n      throw new TypeError(params + ' must be an object, array or omitted');\n    }\n\n    request.params = params;\n  } // if id was left out, generate one (null means explicit notification)\n\n\n  if (typeof id === 'undefined') {\n    const generator = typeof options.generator === 'function' ? options.generator : function () {\n      return uuid();\n    };\n    request.id = generator(request, options);\n  } else if (version === 2 && id === null) {\n    // we have a version 2 notification\n    if (options.notificationIdNull) {\n      request.id = null; // id will not be set at all unless option provided\n    }\n  } else {\n    request.id = id;\n  }\n\n  return request;\n};\n\nmodule.exports = generateRequest;","map":{"version":3,"sources":["/Users/onyejivictor/Documents/code/cope/bulk-spl-token-dist/node_modules/jayson/lib/generateRequest.js"],"names":["uuid","require","generateRequest","method","params","id","options","TypeError","version","request","jsonrpc","Array","isArray","generator","notificationIdNull","module","exports"],"mappings":"AAAA;;AAEA,MAAMA,IAAI,GAAGC,OAAO,CAAC,SAAD,CAApB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,MAAMC,eAAe,GAAG,UAASC,MAAT,EAAiBC,MAAjB,EAAyBC,EAAzB,EAA6BC,OAA7B,EAAsC;AAC5D,MAAG,OAAOH,MAAP,KAAkB,QAArB,EAA+B;AAC7B,UAAM,IAAII,SAAJ,CAAcJ,MAAM,GAAG,mBAAvB,CAAN;AACD;;AAEDG,EAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB,CAL4D,CAO5D;;AACA,QAAME,OAAO,GAAG,OAAOF,OAAO,CAACE,OAAf,KAA2B,QAA3B,GAAsCF,OAAO,CAACE,OAA9C,GAAwD,CAAxE;;AACA,MAAIA,OAAO,KAAK,CAAZ,IAAiBA,OAAO,KAAK,CAAjC,EAAoC;AAClC,UAAM,IAAID,SAAJ,CAAcC,OAAO,GAAG,iBAAxB,CAAN;AACD;;AAED,QAAMC,OAAO,GAAG;AACdN,IAAAA,MAAM,EAAEA;AADM,GAAhB;;AAIA,MAAGK,OAAO,KAAK,CAAf,EAAkB;AAChBC,IAAAA,OAAO,CAACC,OAAR,GAAkB,KAAlB;AACD;;AAED,MAAGN,MAAH,EAAW;AACT;AACA,QAAG,OAAOA,MAAP,KAAkB,QAAlB,IAA8B,CAACO,KAAK,CAACC,OAAN,CAAcR,MAAd,CAAlC,EAAyD;AACvD,YAAM,IAAIG,SAAJ,CAAcH,MAAM,GAAG,sCAAvB,CAAN;AACD;;AACDK,IAAAA,OAAO,CAACL,MAAR,GAAiBA,MAAjB;AACD,GA3B2D,CA6B5D;;;AACA,MAAG,OAAOC,EAAP,KAAe,WAAlB,EAA+B;AAC7B,UAAMQ,SAAS,GAAG,OAAOP,OAAO,CAACO,SAAf,KAA6B,UAA7B,GAA0CP,OAAO,CAACO,SAAlD,GAA8D,YAAW;AAAE,aAAOb,IAAI,EAAX;AAAgB,KAA7G;AACAS,IAAAA,OAAO,CAACJ,EAAR,GAAaQ,SAAS,CAACJ,OAAD,EAAUH,OAAV,CAAtB;AACD,GAHD,MAGO,IAAIE,OAAO,KAAK,CAAZ,IAAiBH,EAAE,KAAK,IAA5B,EAAkC;AACvC;AACA,QAAIC,OAAO,CAACQ,kBAAZ,EAAgC;AAC9BL,MAAAA,OAAO,CAACJ,EAAR,GAAa,IAAb,CAD8B,CACX;AACpB;AACF,GALM,MAKA;AACLI,IAAAA,OAAO,CAACJ,EAAR,GAAaA,EAAb;AACD;;AAED,SAAOI,OAAP;AACD,CA3CD;;AA6CAM,MAAM,CAACC,OAAP,GAAiBd,eAAjB","sourcesContent":["'use strict';\n\nconst uuid = require('uuid/v4');\n\n/**\n *  Generates a JSON-RPC 1.0 or 2.0 request\n *  @param {String} method Name of method to call\n *  @param {Array|Object} params Array of parameters passed to the method as specified, or an object of parameter names and corresponding value\n *  @param {String|Number|null} [id] Request ID can be a string, number, null for explicit notification or left out for automatic generation\n *  @param {Object} [options]\n *  @param {Number} [options.version=2] JSON-RPC version to use (1 or 2)\n *  @param {Boolean} [options.notificationIdNull=false] When true, version 2 requests will set id to null instead of omitting it\n *  @param {Function} [options.generator] Passed the request, and the options object and is expected to return a request ID\n *  @throws {TypeError} If any of the parameters are invalid\n *  @return {Object} A JSON-RPC 1.0 or 2.0 request\n *  @memberOf Utils\n */\nconst generateRequest = function(method, params, id, options) {\n  if(typeof method !== 'string') {\n    throw new TypeError(method + ' must be a string');\n  }\n\n  options = options || {};\n\n  // check valid version provided\n  const version = typeof options.version === 'number' ? options.version : 2;\n  if (version !== 1 && version !== 2) {\n    throw new TypeError(version + ' must be 1 or 2');\n  }\n\n  const request = {\n    method: method\n  };\n\n  if(version === 2) {\n    request.jsonrpc = '2.0';\n  }\n\n  if(params) {\n    // params given, but invalid?\n    if(typeof params !== 'object' && !Array.isArray(params)) {\n      throw new TypeError(params + ' must be an object, array or omitted');\n    }\n    request.params = params;\n  }\n\n  // if id was left out, generate one (null means explicit notification)\n  if(typeof(id) === 'undefined') {\n    const generator = typeof options.generator === 'function' ? options.generator : function() { return uuid(); };\n    request.id = generator(request, options);\n  } else if (version === 2 && id === null) {\n    // we have a version 2 notification\n    if (options.notificationIdNull) {\n      request.id = null; // id will not be set at all unless option provided\n    }\n  } else {\n    request.id = id;\n  }\n\n  return request;\n};\n\nmodule.exports = generateRequest;\n"]},"metadata":{},"sourceType":"script"}