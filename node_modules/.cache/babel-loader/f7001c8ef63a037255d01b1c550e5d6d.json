{"ast":null,"code":"var _jsxFileName = \"/Users/onyejivictor/Documents/code/cope/bulk-spl-token-dist/src/components/MultiTokenSender.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useState, useEffect } from 'react'; //imports\n\nimport { Connection, PublicKey } from '@solana/web3.js';\nimport { ConnectionContext, useConnection } from '../utils/connection';\nimport { parseMintData, parseTokenAccountData } from '../utils/tokens/data';\nimport { TOKEN_PROGRAM_ID } from '../utils/tokens/instructions';\nimport _ from 'lodash';\nimport Queue from '../utils/Queue';\nimport { getTokenInfo, useTokenInfos } from '../utils/tokens/names';\nimport { WalletGiftcard } from 'mdi-material-ui';\nimport { resolve } from 'path';\nimport { findAssociatedTokenAddress, transferTokens } from '../utils/tokens';\nimport { useWallet } from '../utils/wallet';\nimport { useSendTransaction } from '../utils/notifications';\nimport CSVReader from 'react-csv-reader';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction MultiTokenSender() {\n  _s();\n\n  const [sendTransaction, sending] = useSendTransaction();\n  const [data, setData] = useState(null);\n  const [items, setItems] = useState([{\n    name: 'usdc',\n    toAddress: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n    spl_address: 'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v',\n    amountToSend: '1'\n  }, {\n    name: 'usdt',\n    toAddress: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n    spl_address: '6AdCQrMEbqoucMeBj64BNE78FmZoocHipJr2eaP8MwWV',\n    amountToSend: '1'\n  }, {\n    name: 'usdc',\n    toAddress: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n    spl_address: 'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v',\n    amountToSend: '1'\n  }, {\n    name: 'usdt',\n    toAddress: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n    spl_address: '6AdCQrMEbqoucMeBj64BNE78FmZoocHipJr2eaP8MwWV',\n    amountToSend: '1'\n  }, {\n    name: 'usdc',\n    toAddress: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n    spl_address: 'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v',\n    amountToSend: '1'\n  }, {\n    name: 'usdt',\n    toAddress: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n    spl_address: '6AdCQrMEbqoucMeBj64BNE78FmZoocHipJr2eaP8MwWV',\n    amountToSend: '1'\n  }, {\n    name: 'usdc',\n    toAddress: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n    spl_address: 'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v',\n    amountToSend: '1'\n  }, {\n    name: 'usdc',\n    toAddress: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n    spl_address: 'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v',\n    amountToSend: '1'\n  }, {\n    name: 'usdc',\n    toAddress: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n    spl_address: 'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v',\n    amountToSend: '1'\n  }, {\n    name: 'usdc',\n    toAddress: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n    spl_address: 'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v',\n    amountToSend: '1'\n  } // {\n  //   name: 'serum',\n  //   to: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n  //   spl_address: 'SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt',\n  //   amountToSend: '40',\n  // }\n  ]);\n  const [queue, setQueue] = useState('');\n  let context = useContext(ConnectionContext);\n  const tokenInfos = useTokenInfos();\n  const wallet = useWallet();\n  const {\n    endpoint,\n    setEndpoint,\n    connection\n  } = context;\n  useEffect(() => {\n    if (data) {\n      loadToQueue();\n    }\n\n    return () => {};\n  }, [data]);\n\n  const loadToQueue = () => {\n    const queue = new Queue();\n    items.map(item => {\n      const send = () => {\n        return async () => {\n          try {\n            const mint = new PublicKey(item.spl_address);\n            const sourcePublicKey = await findAssociatedTokenAddress(wallet.publicKey, mint);\n            const accountInfo = await connection.getAccountInfo(sourcePublicKey);\n            const mintInfo = await connection.getAccountInfo(mint); // const infos = getTokenInfo(mint, endpoint, tokenInfos);\n\n            let {\n              decimals\n            } = parseMintData(mintInfo.data);\n            const amountToSend = item.amount = Math.round(parseFloat(item.amountToSend) * 10 ** decimals);\n            let {\n              owner,\n              amount\n            } = (accountInfo === null || accountInfo === void 0 ? void 0 : accountInfo.owner.equals(TOKEN_PROGRAM_ID)) ? parseTokenAccountData(accountInfo.data) : {};\n            const transaction = {\n              wallet,\n              amountToSend,\n              mint,\n              decimals,\n              override: true,\n              destinationPublicKey: new PublicKey(item.toAddress)\n            };\n            const tx = {\n              connection,\n              owner: wallet,\n              sourcePublicKey: sourcePublicKey,\n              destinationPublicKey: transaction.destinationPublicKey,\n              amount: amountToSend,\n              memo: '',\n              mint: mint,\n              decimals: decimals,\n              overrideDestinationCheck: true\n            };\n            const result = await sendTransaction(transferTokens(tx));\n            console.log(result);\n          } catch (error) {\n            console.log(error);\n          }\n        };\n      };\n\n      queue.populatePromises(send());\n      console.log(queue);\n    });\n    setQueue(queue); //   });\n  };\n\n  const beginSend = () => {\n    setInterval(() => {\n      queue.run();\n    }, 3000);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        display: 'flex',\n        padding: '1rem',\n        fontWeight: 'bold'\n      },\n      children: \"Multi Token Sender\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        padding: '1rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(CSVReader, {\n        onFileLoaded: (data, fileInfo) => {\n          console.dir(data);\n          setData(data);\n        },\n        style: {\n          marginTop: '1.5rem'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: beginSend,\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(MultiTokenSender, \"m4bnfAv40UpxcE1Bd5dmcDLuyLc=\", false, function () {\n  return [useSendTransaction, useTokenInfos, useWallet];\n});\n\n_c = MultiTokenSender;\nexport default MultiTokenSender;\n\nvar _c;\n\n$RefreshReg$(_c, \"MultiTokenSender\");","map":{"version":3,"sources":["/Users/onyejivictor/Documents/code/cope/bulk-spl-token-dist/src/components/MultiTokenSender.jsx"],"names":["React","useContext","useState","useEffect","Connection","PublicKey","ConnectionContext","useConnection","parseMintData","parseTokenAccountData","TOKEN_PROGRAM_ID","_","Queue","getTokenInfo","useTokenInfos","WalletGiftcard","resolve","findAssociatedTokenAddress","transferTokens","useWallet","useSendTransaction","CSVReader","MultiTokenSender","sendTransaction","sending","data","setData","items","setItems","name","toAddress","spl_address","amountToSend","queue","setQueue","context","tokenInfos","wallet","endpoint","setEndpoint","connection","loadToQueue","map","item","send","mint","sourcePublicKey","publicKey","accountInfo","getAccountInfo","mintInfo","decimals","amount","Math","round","parseFloat","owner","equals","transaction","override","destinationPublicKey","tx","memo","overrideDestinationCheck","result","console","log","error","populatePromises","beginSend","setInterval","run","display","padding","fontWeight","fileInfo","dir","marginTop"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\n\n//imports\n\nimport { Connection, PublicKey } from '@solana/web3.js';\nimport { ConnectionContext, useConnection } from '../utils/connection';\nimport { parseMintData, parseTokenAccountData } from '../utils/tokens/data';\nimport { TOKEN_PROGRAM_ID } from '../utils/tokens/instructions';\nimport _ from 'lodash';\nimport Queue from '../utils/Queue';\nimport { getTokenInfo, useTokenInfos } from '../utils/tokens/names';\nimport { WalletGiftcard } from 'mdi-material-ui';\nimport { resolve } from 'path';\nimport { findAssociatedTokenAddress, transferTokens } from '../utils/tokens';\nimport { useWallet } from '../utils/wallet';\nimport { useSendTransaction } from '../utils/notifications';\nimport CSVReader from 'react-csv-reader';\n\nfunction MultiTokenSender() {\n  const [sendTransaction, sending] = useSendTransaction();\n  const [data, setData] = useState(null);\n  const [items, setItems] = useState([\n    {\n      name: 'usdc',\n      toAddress: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n      spl_address: 'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v',\n      amountToSend: '1',\n    },\n    {\n      name: 'usdt',\n\n      toAddress: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n      spl_address: '6AdCQrMEbqoucMeBj64BNE78FmZoocHipJr2eaP8MwWV',\n      amountToSend: '1',\n    },\n    {\n      name: 'usdc',\n      toAddress: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n      spl_address: 'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v',\n      amountToSend: '1',\n    },\n    {\n      name: 'usdt',\n\n      toAddress: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n      spl_address: '6AdCQrMEbqoucMeBj64BNE78FmZoocHipJr2eaP8MwWV',\n      amountToSend: '1',\n    },\n    {\n      name: 'usdc',\n      toAddress: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n      spl_address: 'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v',\n      amountToSend: '1',\n    },\n    {\n      name: 'usdt',\n\n      toAddress: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n      spl_address: '6AdCQrMEbqoucMeBj64BNE78FmZoocHipJr2eaP8MwWV',\n      amountToSend: '1',\n    },\n    {\n      name: 'usdc',\n      toAddress: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n      spl_address: 'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v',\n      amountToSend: '1',\n    },\n    {\n      name: 'usdc',\n      toAddress: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n      spl_address: 'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v',\n      amountToSend: '1',\n    },\n    {\n      name: 'usdc',\n      toAddress: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n      spl_address: 'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v',\n      amountToSend: '1',\n    },\n    {\n      name: 'usdc',\n      toAddress: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n      spl_address: 'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v',\n      amountToSend: '1',\n    },\n    // {\n    //   name: 'serum',\n    //   to: 'GHGixvqXFDqDVDZ4tkZk4sL3g4U93dAKuFcRKan2F76N',\n    //   spl_address: 'SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt',\n    //   amountToSend: '40',\n    // }\n  ]);\n\n  const [queue, setQueue] = useState('');\n  let context = useContext(ConnectionContext);\n  const tokenInfos = useTokenInfos();\n\n  const wallet = useWallet();\n  const { endpoint, setEndpoint, connection } = context;\n\n  useEffect(() => {\n    if (data) {\n      loadToQueue();\n    }\n    return () => {};\n  }, [data]);\n\n  const loadToQueue = () => {\n    const queue = new Queue();\n    items.map((item) => {\n      const send = () => {\n        return async () => {\n          try {\n            const mint = new PublicKey(item.spl_address);\n            const sourcePublicKey = await findAssociatedTokenAddress(\n              wallet.publicKey,\n              mint,\n            );\n\n            const accountInfo = await connection.getAccountInfo(\n              sourcePublicKey,\n            );\n            const mintInfo = await connection.getAccountInfo(mint);\n            // const infos = getTokenInfo(mint, endpoint, tokenInfos);\n            let { decimals } = parseMintData(mintInfo.data);\n            const amountToSend = (item.amount = Math.round(\n              parseFloat(item.amountToSend) * 10 ** decimals,\n            ));\n            let { owner, amount } = accountInfo?.owner.equals(TOKEN_PROGRAM_ID)\n              ? parseTokenAccountData(accountInfo.data)\n              : {};\n\n            const transaction = {\n              wallet,\n              amountToSend,\n              mint,\n              decimals,\n              override: true,\n              destinationPublicKey: new PublicKey(item.toAddress),\n            };\n\n            const tx = {\n              connection,\n              owner: wallet,\n              sourcePublicKey: sourcePublicKey,\n              destinationPublicKey: transaction.destinationPublicKey,\n              amount: amountToSend,\n              memo: '',\n              mint: mint,\n              decimals: decimals,\n              overrideDestinationCheck: true,\n            };\n\n            const result = await sendTransaction(transferTokens(tx));\n            console.log(result);\n          } catch (error) {\n            console.log(error);\n          }\n        };\n      };\n\n      queue.populatePromises(send());\n      console.log(queue);\n    });\n    setQueue(queue);\n    //   });\n  };\n\n  const beginSend = () => {\n    setInterval(() => {\n      queue.run();\n    }, 3000);\n  };\n\n  return (\n    <>\n      <h3 style={{ display: 'flex', padding: '1rem', fontWeight: 'bold' }}>\n        Multi Token Sender\n      </h3>\n      <div style={{ display: 'flex', padding: '1rem' }}>\n        <CSVReader\n          onFileLoaded={(data, fileInfo) => {\n            console.dir(data);\n            setData(data);\n          }}\n          style={{ marginTop: '1.5rem' }}\n        ></CSVReader>\n\n        <button onClick={beginSend}>Send</button>\n      </div>\n    </>\n  );\n}\n\nexport default MultiTokenSender;\n"]},"metadata":{},"sourceType":"module"}