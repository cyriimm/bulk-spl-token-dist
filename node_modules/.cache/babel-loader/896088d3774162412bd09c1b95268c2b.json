{"ast":null,"code":"import * as BufferLayout from 'buffer-layout';\nimport { PublicKey, SYSVAR_RENT_PUBKEY, TransactionInstruction } from '@solana/web3.js';\nexport const TOKEN_PROGRAM_ID = new PublicKey('TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA');\nexport const WRAPPED_SOL_MINT = new PublicKey('So11111111111111111111111111111111111111112');\nexport const MEMO_PROGRAM_ID = new PublicKey('Memo1UhkJRfHyvLMcVucJwxXeuD728EqVDDwQDxFMNo');\nconst LAYOUT = BufferLayout.union(BufferLayout.u8('instruction'));\nLAYOUT.addVariant(0, BufferLayout.struct([BufferLayout.u8('decimals'), BufferLayout.blob(32, 'mintAuthority'), BufferLayout.u8('freezeAuthorityOption'), BufferLayout.blob(32, 'freezeAuthority')]), 'initializeMint');\nLAYOUT.addVariant(1, BufferLayout.struct([]), 'initializeAccount');\nLAYOUT.addVariant(7, BufferLayout.struct([BufferLayout.nu64('amount')]), 'mintTo');\nLAYOUT.addVariant(8, BufferLayout.struct([BufferLayout.nu64('amount')]), 'burn');\nLAYOUT.addVariant(9, BufferLayout.struct([]), 'closeAccount');\nLAYOUT.addVariant(12, BufferLayout.struct([BufferLayout.nu64('amount'), BufferLayout.u8('decimals')]), 'transferChecked');\nconst instructionMaxSpan = Math.max(...Object.values(LAYOUT.registry).map(r => r.span));\n\nfunction encodeTokenInstructionData(instruction) {\n  let b = Buffer.alloc(instructionMaxSpan);\n  let span = LAYOUT.encode(instruction, b);\n  return b.slice(0, span);\n}\n\nexport function initializeMint({\n  mint,\n  decimals,\n  mintAuthority,\n  freezeAuthority\n}) {\n  let keys = [{\n    pubkey: mint,\n    isSigner: false,\n    isWritable: true\n  }, {\n    pubkey: SYSVAR_RENT_PUBKEY,\n    isSigner: false,\n    isWritable: false\n  }];\n  return new TransactionInstruction({\n    keys,\n    data: encodeTokenInstructionData({\n      initializeMint: {\n        decimals,\n        mintAuthority: mintAuthority.toBuffer(),\n        freezeAuthorityOption: !!freezeAuthority,\n        freezeAuthority: (freezeAuthority || new PublicKey()).toBuffer()\n      }\n    }),\n    programId: TOKEN_PROGRAM_ID\n  });\n}\nexport function initializeAccount({\n  account,\n  mint,\n  owner\n}) {\n  let keys = [{\n    pubkey: account,\n    isSigner: false,\n    isWritable: true\n  }, {\n    pubkey: mint,\n    isSigner: false,\n    isWritable: false\n  }, {\n    pubkey: owner,\n    isSigner: false,\n    isWritable: false\n  }, {\n    pubkey: SYSVAR_RENT_PUBKEY,\n    isSigner: false,\n    isWritable: false\n  }];\n  return new TransactionInstruction({\n    keys,\n    data: encodeTokenInstructionData({\n      initializeAccount: {}\n    }),\n    programId: TOKEN_PROGRAM_ID\n  });\n}\nexport function transferChecked({\n  source,\n  mint,\n  destination,\n  amount,\n  decimals,\n  owner\n}) {\n  let keys = [{\n    pubkey: source,\n    isSigner: false,\n    isWritable: true\n  }, {\n    pubkey: mint,\n    isSigner: false,\n    isWritable: false\n  }, {\n    pubkey: destination,\n    isSigner: false,\n    isWritable: true\n  }, {\n    pubkey: owner,\n    isSigner: true,\n    isWritable: false\n  }];\n  return new TransactionInstruction({\n    keys,\n    data: encodeTokenInstructionData({\n      transferChecked: {\n        amount,\n        decimals\n      }\n    }),\n    programId: TOKEN_PROGRAM_ID\n  });\n}\nexport function mintTo({\n  mint,\n  destination,\n  amount,\n  mintAuthority\n}) {\n  let keys = [{\n    pubkey: mint,\n    isSigner: false,\n    isWritable: true\n  }, {\n    pubkey: destination,\n    isSigner: false,\n    isWritable: true\n  }, {\n    pubkey: mintAuthority,\n    isSigner: true,\n    isWritable: false\n  }];\n  return new TransactionInstruction({\n    keys,\n    data: encodeTokenInstructionData({\n      mintTo: {\n        amount\n      }\n    }),\n    programId: TOKEN_PROGRAM_ID\n  });\n}\nexport function closeAccount({\n  source,\n  destination,\n  owner\n}) {\n  const keys = [{\n    pubkey: source,\n    isSigner: false,\n    isWritable: true\n  }, {\n    pubkey: destination,\n    isSigner: false,\n    isWritable: true\n  }, {\n    pubkey: owner,\n    isSigner: true,\n    isWritable: false\n  }];\n  return new TransactionInstruction({\n    keys,\n    data: encodeTokenInstructionData({\n      closeAccount: {}\n    }),\n    programId: TOKEN_PROGRAM_ID\n  });\n}\nexport function memoInstruction(memo) {\n  return new TransactionInstruction({\n    keys: [],\n    data: Buffer.from(memo, 'utf-8'),\n    programId: MEMO_PROGRAM_ID\n  });\n}\n\nclass PublicKeyLayout extends BufferLayout.Blob {\n  constructor(property) {\n    super(32, property);\n  }\n\n  decode(b, offset) {\n    return new PublicKey(super.decode(b, offset));\n  }\n\n  encode(src, b, offset) {\n    return super.encode(src.toBuffer(), b, offset);\n  }\n\n}\n\nfunction publicKeyLayout(property) {\n  return new PublicKeyLayout(property);\n}\n\nexport const OWNER_VALIDATION_PROGRAM_ID = new PublicKey('4MNPdKu9wFMvEeZBMt3Eipfs5ovVWTJb31pEXDJAAxX5');\nexport const OWNER_VALIDATION_LAYOUT = BufferLayout.struct([publicKeyLayout('account')]);\nexport function encodeOwnerValidationInstruction(instruction) {\n  const b = Buffer.alloc(OWNER_VALIDATION_LAYOUT.span);\n  const span = OWNER_VALIDATION_LAYOUT.encode(instruction, b);\n  return b.slice(0, span);\n}\nexport function assertOwner({\n  account,\n  owner\n}) {\n  const keys = [{\n    pubkey: account,\n    isSigner: false,\n    isWritable: false\n  }];\n  return new TransactionInstruction({\n    keys,\n    data: encodeOwnerValidationInstruction({\n      account: owner\n    }),\n    programId: OWNER_VALIDATION_PROGRAM_ID\n  });\n}","map":{"version":3,"sources":["/Users/onyejivictor/Documents/code/cope/bulk-spl-token-dist/src/utils/tokens/instructions.js"],"names":["BufferLayout","PublicKey","SYSVAR_RENT_PUBKEY","TransactionInstruction","TOKEN_PROGRAM_ID","WRAPPED_SOL_MINT","MEMO_PROGRAM_ID","LAYOUT","union","u8","addVariant","struct","blob","nu64","instructionMaxSpan","Math","max","Object","values","registry","map","r","span","encodeTokenInstructionData","instruction","b","Buffer","alloc","encode","slice","initializeMint","mint","decimals","mintAuthority","freezeAuthority","keys","pubkey","isSigner","isWritable","data","toBuffer","freezeAuthorityOption","programId","initializeAccount","account","owner","transferChecked","source","destination","amount","mintTo","closeAccount","memoInstruction","memo","from","PublicKeyLayout","Blob","constructor","property","decode","offset","src","publicKeyLayout","OWNER_VALIDATION_PROGRAM_ID","OWNER_VALIDATION_LAYOUT","encodeOwnerValidationInstruction","assertOwner"],"mappings":"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","sourcesContent":["import * as BufferLayout from 'buffer-layout';\nimport {\n  PublicKey,\n  SYSVAR_RENT_PUBKEY,\n  TransactionInstruction,\n} from '@solana/web3.js';\n\nexport const TOKEN_PROGRAM_ID = new PublicKey(\n  'TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA',\n);\n\nexport const WRAPPED_SOL_MINT = new PublicKey(\n  'So11111111111111111111111111111111111111112',\n);\n\nexport const MEMO_PROGRAM_ID = new PublicKey(\n  'Memo1UhkJRfHyvLMcVucJwxXeuD728EqVDDwQDxFMNo',\n);\n\nconst LAYOUT = BufferLayout.union(BufferLayout.u8('instruction'));\nLAYOUT.addVariant(\n  0,\n  BufferLayout.struct([\n    BufferLayout.u8('decimals'),\n    BufferLayout.blob(32, 'mintAuthority'),\n    BufferLayout.u8('freezeAuthorityOption'),\n    BufferLayout.blob(32, 'freezeAuthority'),\n  ]),\n  'initializeMint',\n);\nLAYOUT.addVariant(1, BufferLayout.struct([]), 'initializeAccount');\nLAYOUT.addVariant(\n  7,\n  BufferLayout.struct([BufferLayout.nu64('amount')]),\n  'mintTo',\n);\nLAYOUT.addVariant(\n  8,\n  BufferLayout.struct([BufferLayout.nu64('amount')]),\n  'burn',\n);\nLAYOUT.addVariant(9, BufferLayout.struct([]), 'closeAccount');\nLAYOUT.addVariant(\n  12,\n  BufferLayout.struct([BufferLayout.nu64('amount'), BufferLayout.u8('decimals')]),\n  'transferChecked',\n);\n\nconst instructionMaxSpan = Math.max(\n  ...Object.values(LAYOUT.registry).map((r) => r.span),\n);\n\nfunction encodeTokenInstructionData(instruction) {\n  let b = Buffer.alloc(instructionMaxSpan);\n  let span = LAYOUT.encode(instruction, b);\n  return b.slice(0, span);\n}\n\nexport function initializeMint({\n  mint,\n  decimals,\n  mintAuthority,\n  freezeAuthority,\n}) {\n  let keys = [\n    { pubkey: mint, isSigner: false, isWritable: true },\n    { pubkey: SYSVAR_RENT_PUBKEY, isSigner: false, isWritable: false },\n  ];\n  return new TransactionInstruction({\n    keys,\n    data: encodeTokenInstructionData({\n      initializeMint: {\n        decimals,\n        mintAuthority: mintAuthority.toBuffer(),\n        freezeAuthorityOption: !!freezeAuthority,\n        freezeAuthority: (freezeAuthority || new PublicKey()).toBuffer(),\n      },\n    }),\n    programId: TOKEN_PROGRAM_ID,\n  });\n}\n\nexport function initializeAccount({ account, mint, owner }) {\n  let keys = [\n    { pubkey: account, isSigner: false, isWritable: true },\n    { pubkey: mint, isSigner: false, isWritable: false },\n    { pubkey: owner, isSigner: false, isWritable: false },\n    { pubkey: SYSVAR_RENT_PUBKEY, isSigner: false, isWritable: false },\n  ];\n  return new TransactionInstruction({\n    keys,\n    data: encodeTokenInstructionData({\n      initializeAccount: {},\n    }),\n    programId: TOKEN_PROGRAM_ID,\n  });\n}\n\nexport function transferChecked({ source, mint, destination, amount, decimals, owner }) {\n  let keys = [\n    { pubkey: source, isSigner: false, isWritable: true },\n    { pubkey: mint, isSigner: false, isWritable: false },\n    { pubkey: destination, isSigner: false, isWritable: true },\n    { pubkey: owner, isSigner: true, isWritable: false },\n  ];\n  return new TransactionInstruction({\n    keys,\n    data: encodeTokenInstructionData({\n      transferChecked: { amount, decimals },\n    }),\n    programId: TOKEN_PROGRAM_ID,\n  });\n}\n\nexport function mintTo({ mint, destination, amount, mintAuthority }) {\n  let keys = [\n    { pubkey: mint, isSigner: false, isWritable: true },\n    { pubkey: destination, isSigner: false, isWritable: true },\n    { pubkey: mintAuthority, isSigner: true, isWritable: false },\n  ];\n  return new TransactionInstruction({\n    keys,\n    data: encodeTokenInstructionData({\n      mintTo: {\n        amount,\n      },\n    }),\n    programId: TOKEN_PROGRAM_ID,\n  });\n}\n\nexport function closeAccount({ source, destination, owner }) {\n  const keys = [\n    { pubkey: source, isSigner: false, isWritable: true },\n    { pubkey: destination, isSigner: false, isWritable: true },\n    { pubkey: owner, isSigner: true, isWritable: false },\n  ];\n  return new TransactionInstruction({\n    keys,\n    data: encodeTokenInstructionData({\n      closeAccount: {},\n    }),\n    programId: TOKEN_PROGRAM_ID,\n  });\n}\n\nexport function memoInstruction(memo) {\n  return new TransactionInstruction({\n    keys: [],\n    data: Buffer.from(memo, 'utf-8'),\n    programId: MEMO_PROGRAM_ID,\n  });\n}\n\nclass PublicKeyLayout extends BufferLayout.Blob {\n  constructor(property) {\n    super(32, property);\n  }\n\n  decode(b, offset) {\n    return new PublicKey(super.decode(b, offset));\n  }\n\n  encode(src, b, offset) {\n    return super.encode(src.toBuffer(), b, offset);\n  }\n}\n\nfunction publicKeyLayout(property) {\n  return new PublicKeyLayout(property);\n}\n\nexport const OWNER_VALIDATION_PROGRAM_ID = new PublicKey(\n  '4MNPdKu9wFMvEeZBMt3Eipfs5ovVWTJb31pEXDJAAxX5',\n);\n\nexport const OWNER_VALIDATION_LAYOUT = BufferLayout.struct([\n  publicKeyLayout('account'),\n]);\n\nexport function encodeOwnerValidationInstruction(instruction) {\n  const b = Buffer.alloc(OWNER_VALIDATION_LAYOUT.span);\n  const span = OWNER_VALIDATION_LAYOUT.encode(instruction, b);\n  return b.slice(0, span);\n}\n\nexport function assertOwner({ account, owner }) {\n  const keys = [{ pubkey: account, isSigner: false, isWritable: false }];\n  return new TransactionInstruction({\n    keys,\n    data: encodeOwnerValidationInstruction({ account: owner }),\n    programId: OWNER_VALIDATION_PROGRAM_ID,\n  });\n}\n"]},"metadata":{},"sourceType":"module"}